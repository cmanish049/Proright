/*
Copyright 2012 Igor Vaynberg
 
Version: 3.0 Timestamp: Tue Jul 31 21:09:16 PDT 2012

Licensed under the Apache License, Version 2.0 (the "License"); you may not use this work except in
compliance with the License. You may obtain a copy of the License in the LICENSE file, or at:

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software distributed under the License is
distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and limitations under the License.
*/
(function(a){if(typeof a.fn.each2=="undefined"){a.fn.extend({each2:function(f){var d=a([0]),e=-1,b=this.length;while(++e<b&&(d.context=d[0]=this[e])&&f.call(d[0],e,d)!==false){}return this;}});}})(jQuery);(function(i,k){if(window.Select2!==k){return;}var c,e,v,A,s,a;c={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(B){B=B.which?B.which:B;switch(B){case c.LEFT:case c.RIGHT:case c.UP:case c.DOWN:return true;}return false;},isControl:function(B){B=B.which?B.which:B;switch(B){case c.SHIFT:case c.CTRL:case c.ALT:return true;}if(B.metaKey){return true;}return false;},isFunctionKey:function(B){B=B.which?B.which:B;return B>=112&&B<=123;}};s=(function(){var B=1;return function(){return B++;};}());function u(B){if(B&&typeof(B)==="string"){return B.replace(/&/g,"&amp;");}else{return B;}}function b(E,F){var D=0,B=F.length,C;if(typeof E==="undefined"){return -1;}if(E.constructor===String){for(;D<B;D=D+1){if(E.localeCompare(F[D])===0){return D;}}}else{for(;D<B;D=D+1){C=F[D];if(C.constructor===String){if(C.localeCompare(E)===0){return D;}}else{if(C===E){return D;}}}}return -1;}function p(C,B){if(C===B){return true;}if(C===k||B===k){return false;}if(C===null||B===null){return false;}if(C.constructor===String){return C.localeCompare(B)===0;}if(B.constructor===String){return B.localeCompare(C)===0;}return false;}function l(C,E){var F,D,B;if(C===null||C.length<1){return[];}F=C.split(E);for(D=0,B=F.length;D<B;D=D+1){F[D]=i.trim(F[D]);}return F;}function m(B){return B.outerWidth()-B.width();}function y(C){var B="keyup-change-value";C.bind("keydown",function(){if(i.data(C,B)===k){i.data(C,B,C.val());}});C.bind("keyup",function(){var D=i.data(C,B);if(D!==k&&C.val()!==D){i.removeData(C,B);C.trigger("keyup-change");}});}i(document).delegate("*","mousemove",function(B){i.data(document,"select2-lastpos",{x:B.pageX,y:B.pageY});});function t(B){B.bind("mousemove",function(D){var C=i.data(document,"select2-lastpos");if(C===k||C.x!==D.pageX||C.y!==D.pageY){i(D.target).trigger("mousemove-filtered",D);}});}function g(D,B){var C;return function(){window.clearTimeout(C);C=window.setTimeout(B,D);};}function z(D){var B=false,C;return function(){if(B===false){C=D();B=true;}return C;};}function f(B,D){var C=g(B,function(E){D.trigger("scroll-debounced",E);});D.bind("scroll",function(E){if(b(E.target,D.get())>=0){C(E);}});}function d(B){B.preventDefault();B.stopPropagation();}function x(C){if(!a){var B=C[0].currentStyle||window.getComputedStyle(C[0],null);a=i("<div></div>").css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:B.fontSize,fontFamily:B.fontFamily,fontStyle:B.fontStyle,fontWeight:B.fontWeight,letterSpacing:B.letterSpacing,textTransform:B.textTransform,whiteSpace:"nowrap"});i("body").append(a);}a.text(C.val());return a.width();}function h(F,E,C){var D=F.toUpperCase().indexOf(E.toUpperCase()),B=E.length;if(D<0){C.push(F);return;}C.push(F.substring(0,D));C.push("<span class='select2-match'>");C.push(F.substring(D,D+B));C.push("</span>");C.push(F.substring(D+B,F.length));}function o(C){var E,B=0,D=null,F=C.quietMillis||100;return function(G){window.clearTimeout(E);E=window.setTimeout(function(){B+=1;var H=B,J=C.data,K=C.transport||i.ajax,I=C.type||"GET";J=J.call(this,G.term,G.page,G.context);if(null!==D){D.abort();}D=K.call(null,{url:C.url,dataType:C.dataType,data:J,type:I,success:function(M){if(H<B){return;}var L=C.results(M,G.page);G.callback(L);}});},F);};}function q(B){var D=B,C,E=function(F){return""+F.text;};if(!i.isArray(D)){E=D.text;if(!i.isFunction(E)){C=D.text;E=function(F){return F[C];};}D=D.results;}return function(H){var G=H.term,F={};if(G===""){H.callback({results:D});return;}F.results=i(D).filter(function(){return H.matcher(G,E(this));}).get();H.callback(F);};}function n(B){if(i.isFunction(B)){return B;}return function(E){var D=E.term,C={results:[]};i(B).each(function(){var F=this.text!==k,G=F?this.text:this;if(D===""||E.matcher(D,G)){C.results.push(F?this:{id:this,text:this});}});E.callback(C);};}function j(B,C){if(i.isFunction(B)){return true;}if(!B){return fasle;}throw new Error("formatterName must be a function or a falsy value");}function r(B){return i.isFunction(B)?B():B;}i(document).ready(function(){i(document).delegate("*","mousedown touchend",function(D){var C=i(D.target).closest("div.select2-container").get(0),B;if(C){i(document).find("div.select2-container-active").each(function(){if(this!==C){i(this).data("select2").blur();}});}else{C=i(D.target).closest("div.select2-drop").get(0);i(document).find("div.select2-drop-active").each(function(){if(this!==C){i(this).data("select2").blur();}});}C=i(D.target);B=C.attr("for");if("LABEL"===D.target.tagName&&B&&B.length>0){C=i("#"+B);C=C.data("select2");if(C!==k){C.focus();D.preventDefault();}}});});function w(B,C){var D=function(){};D.prototype=new B;D.prototype.constructor=D;D.prototype.parent=B.prototype;D.prototype=i.extend(D.prototype,C);return D;}e=w(Object,{bind:function(C){var B=this;return function(){C.apply(B,arguments);};},init:function(D){var C,B,E=".select2-results";this.opts=D=this.prepareOpts(D);this.id=D.id;if(D.element.data("select2")!==k&&D.element.data("select2")!==null){this.destroy();}this.enabled=true;this.container=this.createContainer();this.containerId="s2id"+s();this.container.attr("id",this.containerId);this.body=z(function(){return D.element.closest("body");});if(D.element.attr("class")!==k){this.container.addClass(D.element.attr("class"));}this.container.css(r(D.containerCss));this.container.addClass(r(D.containerCssClass));this.opts.element.data("select2",this).hide().before(this.container);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");this.dropdown.addClass(r(D.dropdownCssClass));this.dropdown.data("select2",this);this.results=C=this.container.find(E);this.search=B=this.container.find("input.select2-input");B.attr("tabIndex",this.opts.element.attr("tabIndex"));this.resultsPage=0;this.context=null;this.initContainer();this.initContainerWidth();t(this.results);this.dropdown.delegate(E,"mousemove-filtered",this.bind(this.highlightUnderEvent));f(80,this.results);this.dropdown.delegate(E,"scroll-debounced",this.bind(this.loadMoreIfNeeded));if(i.fn.mousewheel){C.mousewheel(function(J,K,H,G){var I=C.scrollTop(),F;if(G>0&&I-G<=0){C.scrollTop(0);d(J);}else{if(G<0&&C.get(0).scrollHeight-C.scrollTop()+G<=C.height()){C.scrollTop(C.get(0).scrollHeight-C.height());d(J);}}});}y(B);B.bind("keyup-change",this.bind(this.updateResults));B.bind("focus",function(){B.addClass("select2-focused");if(B.val()===" "){B.val("");}});B.bind("blur",function(){B.removeClass("select2-focused");});this.dropdown.delegate(E,"mouseup",this.bind(function(F){if(i(F.target).closest(".select2-result-selectable:not(.select2-disabled)").length>0){this.highlightUnderEvent(F);this.selectHighlighted(F);}else{this.focusSearch();}d(F);}));this.dropdown.bind("click mouseup mousedown",function(F){F.stopPropagation();});if(i.isFunction(this.opts.initSelection)){this.initSelection();this.monitorSource();}if(D.element.is(":disabled")||D.element.is("[readonly='readonly']")){this.disable();}},destroy:function(){var B=this.opts.element.data("select2");if(B!==k){B.container.remove();B.dropdown.remove();B.opts.element.removeData("select2").unbind(".select2").show();}},prepareOpts:function(F){var D,C,B,E;D=F.element;if(D.get(0).tagName.toLowerCase()==="select"){this.select=C=F.element;}F.separator=F.separator||",";if(C){i.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in F){throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.");}});}F=i.extend({},{populateResults:function(G,K,M){var L,J,O,I,H=this.opts.id,N=this;L=function(U,P,T){var V,R,aa,X,Z,Q,Y,W,S;for(V=0,R=U.length;V<R;V=V+1){aa=U[V];X=H(aa)!==k;Z=("children" in aa)&&aa.children.length>0;Q=i("<li></li>");Q.addClass("select2-results-dept-"+T);Q.addClass("select2-result");Q.addClass(X?"select2-result-selectable":"select2-result-unselectable");if(Z){Q.addClass("select2-result-with-children");}Q.addClass(N.opts.formatResultCssClass(aa));Y=i("<div></div>");Y.addClass("select2-result-label");S=F.formatResult(aa,Y,M);if(S!==k){Y.html(u(S));}Q.append(Y);if(Z){W=i("<ul></ul>");W.addClass("select2-result-sub");L(aa.children,W,T+1);Q.append(W);}Q.data("select2-data",aa);P.append(Q);}};L(K,G,0);}},i.fn.select2.defaults,F);if(typeof(F.id)!=="function"){B=F.id;F.id=function(G){return G[B];};}if(C){F.query=this.bind(function(J){var I={results:[],more:false},H=J.term,G,L,K;K=function(M,O){var N;if(M.is("option")){if(J.matcher(H,M.text(),M)){O.push({id:M.attr("value"),text:M.text(),element:M.get(),css:M.attr("class")});}}else{if(M.is("optgroup")){N={text:M.attr("label"),children:[],element:M.get(),css:M.attr("class")};M.children().each2(function(P,Q){K(Q,N.children);});if(N.children.length>0){O.push(N);}}}};G=D.children();if(this.getPlaceholder()!==k&&G.length>0){L=G[0];if(i(L).text()===""){G=G.not(L);}}G.each2(function(M,N){K(N,I.results);});J.callback(I);});F.id=function(G){return G.id;};F.formatResultCssClass=function(G){return G.css;};}else{if(!("query" in F)){if("ajax" in F){E=F.element.data("ajax-url");if(E&&E.length>0){F.ajax.url=E;}F.query=o(F.ajax);}else{if("data" in F){F.query=q(F.data);}else{if("tags" in F){F.query=n(F.tags);F.createSearchChoice=function(G){return{id:G,text:G};};F.initSelection=function(G,I){var H=[];i(l(G.val(),F.separator)).each(function(){var L=this,K=this,J=F.tags;if(i.isFunction(J)){J=J();}i(J).each(function(){if(p(this.id,L)){K=this.text;return false;}});H.push({id:L,text:K});});I(H);};}}}}}if(typeof(F.query)!=="function"){throw"query function not defined for Select2 "+F.element.attr("id");}return F;},monitorSource:function(){this.opts.element.bind("change.select2",this.bind(function(B){if(this.opts.element.data("select2-change-triggered")!==true){this.initSelection();}}));},triggerChange:function(B){B=B||{};B=i.extend({},B,{type:"change",val:this.val()});this.opts.element.data("select2-change-triggered",true);this.opts.element.trigger(B);this.opts.element.data("select2-change-triggered",false);this.opts.element.click();},enable:function(){if(this.enabled){return;}this.enabled=true;this.container.removeClass("select2-container-disabled");},disable:function(){if(!this.enabled){return;}this.close();this.enabled=false;this.container.addClass("select2-container-disabled");},opened:function(){return this.container.hasClass("select2-dropdown-open");},positionDropdown:function(){var F=this.container.offset(),L=this.container.outerHeight(),C=this.container.outerWidth(),E=this.dropdown.outerHeight(),I=i(window).scrollTop()+document.documentElement.clientHeight,B=F.top+L,J=B+E<=I,H=(F.top-E)>=this.body().scrollTop(),D=this.dropdown.hasClass("select2-drop-above"),K,G;if(D){K=true;if(!H&&J){K=false;}}else{K=false;if(!J&&H){K=true;}}if(K){B=F.top-E;this.container.addClass("select2-drop-above");this.dropdown.addClass("select2-drop-above");}else{this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above");}G={top:B,left:F.left,width:C};this.dropdown.css(G);},shouldOpen:function(){var B;if(this.opened()){return false;}B=jQuery.Event("open");this.opts.element.trigger(B);return !B.isDefaultPrevented();},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above");},open:function(){if(!this.shouldOpen()){return false;}window.setTimeout(this.bind(this.opening),1);return true;},opening:function(){var E=this.containerId,C="#"+E,B="scroll."+E,D="resize."+E;this.container.parents().each(function(){i(this).bind(B,function(){var F=i(C);if(F.length==0){i(this).unbind(B);}F.select2("close");});});i(window).bind(D,function(){var F=i(C);if(F.length==0){i(window).unbind(D);}F.select2("close");});this.clearDropdownAlignmentPreference();if(this.search.val()===" "){this.search.val("");}this.dropdown.css(r(this.opts.dropdownCss));this.dropdown.addClass("select2-drop-active");this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.updateResults(true);if(this.dropdown[0]!==this.body().children().last()[0]){this.dropdown.detach().appendTo(this.body());}this.dropdown.show();this.ensureHighlightVisible();this.positionDropdown();this.focusSearch();},close:function(){if(!this.opened()){return;}var B=this;this.container.parents().each(function(){i(this).unbind("scroll."+B.containerId);});i(window).unbind("resize."+this.containerId);this.clearDropdownAlignmentPreference();this.dropdown.hide();this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active");this.results.empty();this.clearSearch();this.opts.element.trigger(jQuery.Event("close"));},clearSearch:function(){},ensureHighlightVisible:function(){var E=this.results,D,B,I,H,F,G,C;B=this.highlight();if(B<0){return;}if(B==0){E.scrollTop(0);return;}D=E.find(".select2-result-selectable");I=i(D[B]);H=I.offset().top+I.outerHeight();if(B===D.length-1){C=E.find("li.select2-more-results");if(C.length>0){H=C.offset().top+C.outerHeight();}}F=E.offset().top+E.outerHeight();if(H>F){E.scrollTop(E.scrollTop()+(H-F));}G=I.offset().top-E.offset().top;if(G<0){E.scrollTop(E.scrollTop()+G);}},moveHighlight:function(E){var D=this.results.find(".select2-result-selectable"),C=this.highlight();while(C>-1&&C<D.length){C+=E;var B=i(D[C]);if(B.hasClass("select2-result-selectable")&&!B.hasClass("select2-disabled")){this.highlight(C);break;}}},highlight:function(B){var C=this.results.find(".select2-result-selectable").not(".select2-disabled");if(arguments.length===0){return b(C.filter(".select2-highlighted")[0],C.get());}if(B>=C.length){B=C.length-1;}if(B<0){B=0;}C.removeClass("select2-highlighted");i(C[B]).addClass("select2-highlighted");this.ensureHighlightVisible();},countSelectableResults:function(){return this.results.find(".select2-result-selectable").not(".select2-disabled").length;},highlightUnderEvent:function(C){var B=i(C.target).closest(".select2-result-selectable");if(B.length>0&&!B.is(".select2-highlighted")){var D=this.results.find(".select2-result-selectable");this.highlight(D.index(B));}else{if(B.length==0){this.results.find(".select2-highlighted").removeClass("select2-highlighted");}}},loadMoreIfNeeded:function(){var F=this.results,E=F.find("li.select2-more-results"),I,H=-1,G=this.resultsPage+1,B=this,D=this.search.val(),C=this.context;if(E.length===0){return;}I=E.offset().top-F.offset().top-F.height();if(I<=0){E.addClass("select2-active");this.opts.query({term:D,page:G,context:C,matcher:this.opts.matcher,callback:this.bind(function(J){B.opts.populateResults.call(this,F,J.results,{term:D,page:G,context:C});if(J.more===true){E.detach().appendTo(F).text(B.opts.formatLoadMore(G+1));window.setTimeout(function(){B.loadMoreIfNeeded();},10);}else{E.remove();}B.positionDropdown();B.resultsPage=G;})});}},updateResults:function(C){var E=this.search,D=this.results,H=this.opts,I,B=this;if(C!==true&&(this.showSearchInput===false||!this.opened())){return;}E.addClass("select2-active");function G(){D.scrollTop(0);E.removeClass("select2-active");B.positionDropdown();}function F(J){D.html(u(J));G();}if(H.maximumSelectionSize>=1){I=this.data();if(i.isArray(I)&&I.length>=H.maximumSelectionSize&&j(H.formatSelectionTooBig,"formatSelectionTooBig")){F("<li class='select2-selection-limit'>"+H.formatSelectionTooBig(H.maximumSelectionSize)+"</li>");return;}}if(E.val().length<H.minimumInputLength&&j(H.formatInputTooShort,"formatInputTooShort")){F("<li class='select2-no-results'>"+H.formatInputTooShort(E.val(),H.minimumInputLength)+"</li>");return;}else{F("<li class='select2-searching'>"+H.formatSearching()+"</li>");}this.resultsPage=1;H.query({term:E.val(),page:this.resultsPage,context:null,matcher:H.matcher,callback:this.bind(function(K){var J;this.context=(K.context===k)?null:K.context;if(this.opts.createSearchChoice&&E.val()!==""){J=this.opts.createSearchChoice.call(null,E.val(),K.results);if(J!==k&&J!==null&&B.id(J)!==k&&B.id(J)!==null){if(i(K.results).filter(function(){return p(B.id(this),B.id(J));}).length===0){K.results.unshift(J);}}}if(K.results.length===0&&j(H.formatNoMatches,"formatNoMatches")){F("<li class='select2-no-results'>"+H.formatNoMatches(E.val())+"</li>");return;}D.empty();B.opts.populateResults.call(this,D,K.results,{term:E.val(),page:this.resultsPage,context:null});if(K.more===true&&j(H.formatLoadMore,"formatLoadMore")){D.append("<li class='select2-more-results'>"+u(H.formatLoadMore(this.resultsPage))+"</li>");window.setTimeout(function(){B.loadMoreIfNeeded();},10);}this.postprocessResults(K,C);G();})});},cancel:function(){this.close();},blur:function(){this.close();this.container.removeClass("select2-container-active");this.dropdown.removeClass("select2-drop-active");if(this.search[0]===document.activeElement){this.search.blur();}this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");},focusSearch:function(){window.setTimeout(this.bind(function(){this.search.focus();this.search.val(this.search.val());}),10);},selectHighlighted:function(){var B=this.highlight(),C=this.results.find(".select2-highlighted").not(".select2-disabled"),D=C.closest(".select2-result-selectable").data("select2-data");if(D){C.addClass("select2-disabled");this.highlight(B);this.onSelect(D);}},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder;},initContainerWidth:function(){function C(){var G,E,H,F,D;if(this.opts.width==="off"){return null;}else{if(this.opts.width==="element"){return this.opts.element.outerWidth()===0?"auto":this.opts.element.outerWidth()+"px";}else{if(this.opts.width==="copy"||this.opts.width==="resolve"){G=this.opts.element.attr("style");if(G!==k){E=G.split(";");for(F=0,D=E.length;F<D;F=F+1){H=E[F].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/);if(H!==null&&H.length>=1){return H[1];}}}if(this.opts.width==="resolve"){G=this.opts.element.css("width");if(G.indexOf("%")>0){return G;}return(this.opts.element.outerWidth()===0?"auto":this.opts.element.outerWidth()+"px");}return null;}else{if(i.isFunction(this.opts.width)){return this.opts.width();}else{return this.opts.width;}}}}}var B=C.call(this);if(B!==null){this.container.attr("style","width: "+B);}}});v=w(e,{createContainer:function(){var B=i("<div></div>",{"class":"select2-container"}).html(["    <a href='javascript:void(0)' class='select2-choice'>","   <span></span><abbr class='select2-search-choice-close' style='display:none;'></abbr>","   <div><b></b></div>","</a>","    <div class='select2-drop select2-offscreen'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return B;},opening:function(){this.search.show();this.parent.opening.apply(this,arguments);this.dropdown.removeClass("select2-offscreen");},close:function(){if(!this.opened()){return;}this.parent.close.apply(this,arguments);this.dropdown.removeAttr("style").addClass("select2-offscreen").insertAfter(this.selection).show();},focus:function(){this.close();this.selection.focus();},isFocused:function(){return this.selection[0]===document.activeElement;},cancel:function(){this.parent.cancel.apply(this,arguments);this.selection.focus();},initContainer:function(){var D,C=this.container,E=this.dropdown,B=false;this.selection=D=C.find(".select2-choice");this.search.bind("keydown",this.bind(function(F){if(!this.enabled){return;}if(F.which===c.PAGE_UP||F.which===c.PAGE_DOWN){d(F);return;}if(this.opened()){switch(F.which){case c.UP:case c.DOWN:this.moveHighlight((F.which===c.UP)?-1:1);d(F);return;case c.TAB:case c.ENTER:this.selectHighlighted();d(F);return;case c.ESC:this.cancel(F);d(F);return;}}else{if(F.which===c.TAB||c.isControl(F)||c.isFunctionKey(F)||F.which===c.ESC){return;}this.open();if(F.which===c.ENTER){return;}}}));this.search.bind("focus",this.bind(function(){this.selection.attr("tabIndex","-1");}));this.search.bind("blur",this.bind(function(){if(!this.opened()){this.container.removeClass("select2-container-active");}window.setTimeout(this.bind(function(){this.selection.attr("tabIndex",this.opts.element.attr("tabIndex"));}),10);}));D.bind("mousedown",this.bind(function(F){B=true;if(this.opened()){this.close();this.selection.focus();}else{if(this.enabled){this.open();}}B=false;}));E.bind("mousedown",this.bind(function(){this.search.focus();}));D.bind("focus",this.bind(function(){this.container.addClass("select2-container-active");this.search.attr("tabIndex","-1");}));D.bind("blur",this.bind(function(){if(!this.opened()){this.container.removeClass("select2-container-active");}window.setTimeout(this.bind(function(){this.search.attr("tabIndex",this.opts.element.attr("tabIndex"));}),10);}));D.bind("keydown",this.bind(function(G){if(!this.enabled){return;}if(G.which===c.PAGE_UP||G.which===c.PAGE_DOWN){d(G);return;}if(G.which===c.TAB||c.isControl(G)||c.isFunctionKey(G)||G.which===c.ESC||G.which==c.ENTER){return;}if(G.which==c.DELETE){if(this.opts.allowClear){this.clear();}return;}this.open();if(G.which===c.ENTER){d(G);return;}if(G.which<48){d(G);return;}var F=String.fromCharCode(G.which).toLowerCase();if(G.shiftKey){F=F.toUpperCase();}this.search.val(F);d(G);}));D.delegate("abbr","mousedown",this.bind(function(F){if(!this.enabled){return;}this.clear();d(F);this.close();this.triggerChange();this.selection.focus();}));this.setPlaceholder();this.search.bind("focus",this.bind(function(){this.container.addClass("select2-container-active");}));},clear:function(){this.opts.element.val("");this.selection.find("span").empty();this.selection.removeData("select2-data");this.setPlaceholder();},initSelection:function(){var C;if(this.opts.element.val()===""){this.close();this.setPlaceholder();}else{var B=this;this.opts.initSelection.call(null,this.opts.element,function(D){if(D!==k&&D!==null){B.updateSelection(D);B.close();B.setPlaceholder();}});}},prepareOpts:function(){var B=this.parent.prepareOpts.apply(this,arguments);if(B.element.get(0).tagName.toLowerCase()==="select"){B.initSelection=function(C,E){var D=C.find(":selected");if(i.isFunction(E)){E({id:D.attr("value"),text:D.text()});}};}return B;},setPlaceholder:function(){var B=this.getPlaceholder();if(this.opts.element.val()===""&&B!==k){if(this.select&&this.select.find("option:first").text()!==""){return;}this.selection.find("span").html(u(B));this.selection.addClass("select2-default");this.selection.find("abbr").hide();}},postprocessResults:function(E,C){var D=0,B=this,F=true;this.results.find(".select2-result-selectable").each2(function(G,H){if(p(B.id(H.data("select2-data")),B.opts.element.val())){D=G;return false;}});this.highlight(D);if(C===true){F=this.showSearchInput=E.results.length>=this.opts.minimumResultsForSearch;this.dropdown.find(".select2-search")[F?"removeClass":"addClass"]("select2-search-hidden");i(this.dropdown,this.container)[F?"addClass":"removeClass"]("select2-with-searchbox");}},onSelect:function(C){var B=this.opts.element.val();this.opts.element.val(this.id(C));this.updateSelection(C);this.close();this.selection.focus();if(!p(B,this.id(C))){this.triggerChange();}},updateSelection:function(D){var B=this.selection.find("span"),C;this.selection.data("select2-data",D);B.empty();C=this.opts.formatSelection(D,B);if(C!==k){B.append(u(C));}this.selection.removeClass("select2-default");if(this.opts.allowClear&&this.getPlaceholder()!==k){this.selection.find("abbr").show();}},val:function(){var D,C=null,B=this;if(arguments.length===0){return this.opts.element.val();}D=arguments[0];if(this.select){this.select.val(D).find(":selected").each2(function(E,F){C={id:F.attr("value"),text:F.text()};return false;});this.updateSelection(C);this.setPlaceholder();}else{if(this.opts.initSelection===k){throw new Error("cannot call val() if initSelection() is not defined");}if(!D){this.clear();return;}this.opts.initSelection(this.opts.element,function(E){B.opts.element.val(!E?"":B.id(E));B.updateSelection(E);B.setPlaceholder();});}},clearSearch:function(){this.search.val("");},data:function(C){var B;if(arguments.length===0){B=this.selection.data("select2-data");if(B==k){B=null;}return B;}else{if(!C||C===""){this.clear();}else{this.opts.element.val(!C?"":this.id(C));this.updateSelection(C);}}}});A=w(e,{createContainer:function(){var B=i("<div></div>",{"class":"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi' style='display:none;'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return B;},prepareOpts:function(){var B=this.parent.prepareOpts.apply(this,arguments);if(B.element.get(0).tagName.toLowerCase()==="select"){B.initSelection=function(C,E){var D=[];C.find(":selected").each2(function(F,G){D.push({id:G.attr("value"),text:G.text()});});if(i.isFunction(E)){E(D);}};}return B;},initContainer:function(){var B=".select2-choices",C;this.searchContainer=this.container.find(".select2-search-field");this.selection=C=this.container.find(B);this.search.bind("keydown",this.bind(function(E){if(!this.enabled){return;}if(E.which===c.BACKSPACE&&this.search.val()===""){this.close();var F,D=C.find(".select2-search-choice-focus");if(D.length>0){this.unselect(D.first());this.search.width(10);d(E);return;}F=C.find(".select2-search-choice");if(F.length>0){F.last().addClass("select2-search-choice-focus");}}else{C.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");}if(this.opened()){switch(E.which){case c.UP:case c.DOWN:this.moveHighlight((E.which===c.UP)?-1:1);d(E);return;case c.ENTER:case c.TAB:this.selectHighlighted();d(E);return;case c.ESC:this.cancel(E);d(E);return;}}if(E.which===c.TAB||c.isControl(E)||c.isFunctionKey(E)||E.which===c.BACKSPACE||E.which===c.ESC||E.which===c.ENTER){return;}this.open();if(E.which===c.PAGE_UP||E.which===c.PAGE_DOWN){d(E);}}));this.search.bind("keyup",this.bind(this.resizeSearch));this.search.bind("blur",this.bind(function(){this.container.removeClass("select2-container-active");}));this.container.delegate(B,"mousedown",this.bind(function(D){if(!this.enabled){return;}this.clearPlaceholder();this.open();this.focusSearch();D.preventDefault();}));this.container.delegate(B,"focus",this.bind(function(){if(!this.enabled){return;}this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active");this.clearPlaceholder();}));this.clearSearch();},enable:function(){if(this.enabled){return;}this.parent.enable.apply(this,arguments);this.search.removeAttr("disabled");},disable:function(){if(!this.enabled){return;}this.parent.disable.apply(this,arguments);this.search.attr("disabled",true);},initSelection:function(){var C;if(this.opts.element.val()===""){this.updateSelection([]);this.close();this.clearSearch();}if(this.select||this.opts.element.val()!==""){var B=this;this.opts.initSelection.call(null,this.opts.element,function(D){if(D!==k&&D!==null){B.updateSelection(D);B.close();B.clearSearch();}});}},clearSearch:function(){var B=this.getPlaceholder();if(B!==k&&this.getVal().length===0&&this.search.hasClass("select2-focused")===false){this.search.val(B).addClass("select2-default");this.resizeSearch();}else{this.search.val(" ").width(10);}},clearPlaceholder:function(){if(this.search.hasClass("select2-default")){this.search.val("").removeClass("select2-default");}else{if(this.search.val()===" "){this.search.val("");}}},opening:function(){this.parent.opening.apply(this,arguments);this.clearPlaceholder();this.resizeSearch();this.focusSearch();},close:function(){if(!this.opened()){return;}this.parent.close.apply(this,arguments);},focus:function(){this.close();this.search.focus();},isFocused:function(){return this.search.hasClass("select2-focused");},updateSelection:function(E){var D=[],C=[],B=this;i(E).each(function(){if(b(B.id(this),D)<0){D.push(B.id(this));C.push(this);}});E=C;this.selection.find(".select2-search-choice").remove();i(E).each(function(){B.addSelectedChoice(this);});B.postprocessResults();},onSelect:function(B){this.addSelectedChoice(B);if(this.select){this.postprocessResults();}if(this.opts.closeOnSelect){this.close();this.search.width(10);}else{this.search.width(10);this.resizeSearch();if(this.countSelectableResults()>0){this.positionDropdown();}else{this.close();}}this.triggerChange({added:B});this.focusSearch();},cancel:function(){this.close();this.focusSearch();},addSelectedChoice:function(D){var B=i("<li class='select2-search-choice'>    <div></div>    <a href='javascript:void(0)' class='select2-search-choice-close' tabindex='-1'></a></li>"),F=this.id(D),E=this.getVal(),C;C=this.opts.formatSelection(D,B);B.find("div").replaceWith("<div>"+u(C)+"</div>");B.find(".select2-search-choice-close").bind("mousedown",d).bind("click dblclick",this.bind(function(G){if(!this.enabled){return;}i(G.target).closest(".select2-search-choice").fadeOut("fast").animate({width:"hide"},50,this.bind(function(){this.unselect(i(G.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");this.close();this.focusSearch();})).dequeue();d(G);})).bind("focus",this.bind(function(){if(!this.enabled){return;}this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active");}));B.data("select2-data",D);B.insertBefore(this.searchContainer);E.push(F);this.setVal(E);},unselect:function(C){var E=this.getVal(),D,B;C=C.closest(".select2-search-choice");if(C.length===0){throw"Invalid argument: "+C+". Must be .select2-search-choice";}D=C.data("select2-data");B=b(this.id(D),E);if(B>=0){E.splice(B,1);this.setVal(E);if(this.select){this.postprocessResults();}}C.remove();this.triggerChange({removed:D});},postprocessResults:function(){var D=this.getVal(),E=this.results.find(".select2-result-selectable"),C=this.results.find(".select2-result-with-children"),B=this;E.each2(function(G,F){var H=B.id(F.data("select2-data"));if(b(H,D)>=0){F.addClass("select2-disabled").removeClass("select2-result-selectable");}else{F.removeClass("select2-disabled").addClass("select2-result-selectable");}});C.each2(function(F,G){if(G.find(".select2-result-selectable").length==0){G.addClass("select2-disabled");}else{G.removeClass("select2-disabled");}});E.each2(function(G,F){if(!F.hasClass("select2-disabled")&&F.hasClass("select2-result-selectable")){B.highlight(0);return false;}});},resizeSearch:function(){var G,E,D,B,C,F=m(this.search);G=x(this.search)+10;E=this.search.offset().left;D=this.selection.width();B=this.selection.offset().left;C=D-(E-B)-F;if(C<G){C=D-F;}if(C<40){C=D-F;}this.search.width(C);},getVal:function(){var B;if(this.select){B=this.select.val();return B===null?[]:B;}else{B=this.opts.element.val();return l(B,this.opts.separator);}},setVal:function(C){var B;if(this.select){this.select.val(C);}else{B=[];i(C).each(function(){if(b(this,B)<0){B.push(this);}});this.opts.element.val(B.length===0?"":B.join(this.opts.separator));}},val:function(){var D,C=[],B=this;if(arguments.length===0){return this.getVal();}D=arguments[0];if(!D){this.opts.element.val("");this.updateSelection([]);this.clearSearch();return;}this.setVal(D);if(this.select){this.select.find(":selected").each(function(){C.push({id:i(this).attr("value"),text:i(this).text()});});this.updateSelection(C);}else{if(this.opts.initSelection===k){throw new Error("val() cannot be called if initSelection() is not defined");}this.opts.initSelection(this.opts.element,function(F){var E=i(F).map(B.id);B.setVal(E);B.updateSelection(F);B.clearSearch();});}this.clearSearch();},onSortStart:function(){if(this.select){throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");}this.search.width(0);this.searchContainer.hide();},onSortEnd:function(){var C=[],B=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();this.selection.find(".select2-search-choice").each(function(){C.push(B.opts.id(i(this).data("select2-data")));});this.setVal(C);this.triggerChange();},data:function(C){var B=this,D;if(arguments.length===0){return this.selection.find(".select2-search-choice").map(function(){return i(this).data("select2-data");}).get();}else{if(!C){C=[];}D=i.map(C,function(E){return B.opts.id(E);});this.setVal(D);this.updateSelection(C);this.clearSearch();}}});i.fn.select2=function(){var E=Array.prototype.slice.call(arguments,0),F,D,G,C,B=["val","destroy","opened","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","disable","positionDropdown","data"];this.each(function(){if(E.length===0||typeof(E[0])==="object"){F=E.length===0?{}:i.extend({},E[0]);F.element=i(this);if(F.element.get(0).tagName.toLowerCase()==="select"){C=F.element.attr("multiple");}else{C=F.multiple||false;if("tags" in F){F.multiple=C=true;}}D=C?new A():new v();D.init(F);}else{if(typeof(E[0])==="string"){if(b(E[0],B)<0){throw"Unknown method: "+E[0];}G=k;D=i(this).data("select2");if(D===k){return;}if(E[0]==="container"){G=D.container;}else{G=D[E[0]].apply(D,E.slice(1));}if(G!==k){return false;}}else{throw"Invalid arguments to select2 plugin: "+E;}}});return(G===k)?this:G;};i.fn.select2.defaults={width:"copy",closeOnSelect:true,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(B,C,E){var D=[];h(B.text,E.term,D);return D.join("");},formatSelection:function(C,B){return C.text;},formatResultCssClass:function(B){return k;},formatNoMatches:function(){return"No matches found";},formatInputTooShort:function(B,C){return"Please enter "+(C-B.length)+" more characters";},formatSelectionTooBig:function(B){return"You can only select "+B+" items";},formatLoadMore:function(B){return"Loading more results...";},formatSearching:function(){return"Searching...";},minimumResultsForSearch:0,minimumInputLength:0,maximumSelectionSize:0,id:function(B){return B.id;},matcher:function(B,C){return C.toUpperCase().indexOf(B.toUpperCase())>=0;}};window.Select2={query:{ajax:o,local:q,tags:n},util:{debounce:g,markMatch:h},"class":{"abstract":e,single:v,multi:A}};}(jQuery));

// Chosen, a Select Box Enhancer for jQuery and Protoype
// by Patrick Filler for Harvest, http://getharvest.com
// 
// Version 0.9.8
// Full source at https://github.com/harvesthq/chosen
// Copyright (c) 2011 Harvest http://getharvest.com

// MIT License, https://github.com/harvesthq/chosen/blob/master/LICENSE.md
// This file is generated by `cake build`, do not edit it by hand.
((function(){var a;a=function(){function a(){this.options_index=0,this.parsed=[]}return a.prototype.add_node=function(a){return a.nodeName==="OPTGROUP"?this.add_group(a):this.add_option(a)},a.prototype.add_group=function(a){var b,c,d,e,f,g;b=this.parsed.length,this.parsed.push({array_index:b,group:!0,label:a.label,children:0,disabled:a.disabled}),f=a.childNodes,g=[];for(d=0,e=f.length;d<e;d++)c=f[d],g.push(this.add_option(c,b,a.disabled));return g},a.prototype.add_option=function(a,b,c){if(a.nodeName==="OPTION")return a.text!==""?(b!=null&&(this.parsed[b].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:a.value,text:a.text,html:a.innerHTML,selected:a.selected,disabled:c===!0?c:a.disabled,group_array_index:b,classes:a.className,style:a.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},a}(),a.select_to_array=function(b){var c,d,e,f,g;d=new a,g=b.childNodes;for(e=0,f=g.length;e<f;e++)c=g[e],d.add_node(c);return d.parsed},this.SelectParser=a})).call(this),function(){var a,b;b=this,a=function(){function a(a,b){this.form_field=a,this.options=b!=null?b:{},this.set_default_values(),this.is_multiple=this.form_field.multiple,this.set_default_text(),this.setup(),this.set_up_html(),this.register_observers(),this.finish_setup()}return a.prototype.set_default_values=function(){var a=this;return this.click_test_action=function(b){return a.test_active_click(b)},this.activate_action=function(b){return a.activate_field(b)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=this.options.allow_single_deselect!=null&&this.form_field.options[0]!=null&&this.form_field.options[0].text===""?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.search_contains=this.options.search_contains||!1,this.choices=0,this.single_backstroke_delete=this.options.single_backstroke_delete||!1,this.max_selected_options=this.options.max_selected_options||Infinity},a.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options":this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||"Select an Option",this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||"No results match"},a.prototype.mouse_enter=function(){return this.mouse_on_container=!0},a.prototype.mouse_leave=function(){return this.mouse_on_container=!1},a.prototype.input_focus=function(a){var b=this;if(!this.active_field)return setTimeout(function(){return b.container_mousedown()},50)},a.prototype.input_blur=function(a){var b=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return b.blur_test()},100)},a.prototype.result_add_option=function(a){var b,c;return a.disabled?"":(a.dom_id=this.container_id+"_o_"+a.array_index,b=a.selected&&this.is_multiple?[]:["active-result"],a.selected&&b.push("result-selected"),a.group_array_index!=null&&b.push("group-option"),a.classes!==""&&b.push(a.classes),c=a.style.cssText!==""?' style="'+a.style+'"':"",'<li id="'+a.dom_id+'" class="'+b.join(" ")+'"'+c+">"+a.html+"</li>")},a.prototype.results_update_field=function(){return this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build()},a.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},a.prototype.results_search=function(a){return this.results_showing?this.winnow_results():this.results_show()},a.prototype.keyup_checker=function(a){var b,c;b=(c=a.which)!=null?c:a.keyCode,this.search_field_scale();switch(b){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:a.preventDefault();if(this.results_showing)return this.result_select(a);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},a.prototype.generate_field_id=function(){var a;return a=this.generate_random_id(),this.form_field.id=a,a},a.prototype.generate_random_char=function(){var a,b,c;return a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",c=Math.floor(Math.random()*a.length),b=a.substring(c,c+1)},a}(),b.AbstractChosen=a}.call(this),function(){var a,b,c,d,e=Object.prototype.hasOwnProperty,f=function(a,b){function d(){this.constructor=a}for(var c in b)e.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=this,a=jQuery,a.fn.extend({chosen:function(c){return!a.browser.msie||a.browser.version!=="6.0"&&a.browser.version!=="7.0"?this.each(function(d){var e;e=a(this);if(!e.hasClass("chzn-done"))return e.data("chosen",new b(this,c))}):this}}),b=function(b){function e(){e.__super__.constructor.apply(this,arguments)}return f(e,b),e.prototype.setup=function(){return this.form_field_jq=a(this.form_field),this.current_value=this.form_field_jq.val(),this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")},e.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")},e.prototype.set_up_html=function(){var b,d,e,f;return this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id(),this.container_id+="_chzn",this.f_width=this.form_field_jq.outerWidth(),b=a("<div />",{id:this.container_id,"class":"chzn-container"+(this.is_rtl?" chzn-rtl":""),style:"width: "+this.f_width+"px;"}),this.is_multiple?b.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):b.html('<a href="javascript:void(0)" class="chzn-single chzn-default"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>'),this.form_field_jq.hide().after(b),this.container=a("#"+this.container_id),this.container.addClass("chzn-container-"+(this.is_multiple?"multi":"single")),this.dropdown=this.container.find("div.chzn-drop").first(),d=this.container.height(),e=this.f_width-c(this.dropdown),this.dropdown.css({width:e+"px",top:d+"px"}),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chzn-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first(),f=e-c(this.search_container)-c(this.search_field),this.search_field.css({width:f+"px"})),this.results_build(),this.set_tab_index(),this.form_field_jq.trigger("liszt:ready",{chosen:this})},e.prototype.register_observers=function(){var a=this;return this.container.mousedown(function(b){return a.container_mousedown(b)}),this.container.mouseup(function(b){return a.container_mouseup(b)}),this.container.mouseenter(function(b){return a.mouse_enter(b)}),this.container.mouseleave(function(b){return a.mouse_leave(b)}),this.search_results.mouseup(function(b){return a.search_results_mouseup(b)}),this.search_results.mouseover(function(b){return a.search_results_mouseover(b)}),this.search_results.mouseout(function(b){return a.search_results_mouseout(b)}),this.form_field_jq.bind("liszt:updated",function(b){return a.results_update_field(b)}),this.search_field.blur(function(b){return a.input_blur(b)}),this.search_field.keyup(function(b){return a.keyup_checker(b)}),this.search_field.keydown(function(b){return a.keydown_checker(b)}),this.is_multiple?(this.search_choices.click(function(b){return a.choices_click(b)}),this.search_field.focus(function(b){return a.input_focus(b)})):this.container.click(function(a){return a.preventDefault()})},e.prototype.search_field_disabled=function(){this.is_disabled=this.form_field_jq[0].disabled;if(this.is_disabled)return this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field();this.container.removeClass("chzn-disabled"),this.search_field[0].disabled=!1;if(!this.is_multiple)return this.selected_item.bind("focus",this.activate_action)},e.prototype.container_mousedown=function(b){var c;if(!this.is_disabled)return c=b!=null?a(b.target).hasClass("search-choice-close"):!1,b&&b.type==="mousedown"&&!this.results_showing&&b.stopPropagation(),!this.pending_destroy_click&&!c?(this.active_field?!this.is_multiple&&b&&(a(b.target)[0]===this.selected_item[0]||a(b.target).parents("a.chzn-single").length)&&(b.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),a(document).click(this.click_test_action),this.results_show()),this.activate_field()):this.pending_destroy_click=!1},e.prototype.container_mouseup=function(a){if(a.target.nodeName==="ABBR"&&!this.is_disabled)return this.results_reset(a)},e.prototype.blur_test=function(a){if(!this.active_field&&this.container.hasClass("chzn-container-active"))return this.close_field()},e.prototype.close_field=function(){return a(document).unbind("click",this.click_test_action),this.is_multiple||(this.selected_item.attr("tabindex",this.search_field.attr("tabindex")),this.search_field.attr("tabindex",-1)),this.active_field=!1,this.results_hide(),this.container.removeClass("chzn-container-active"),this.winnow_results_clear(),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},e.prototype.activate_field=function(){return!this.is_multiple&&!this.active_field&&(this.search_field.attr("tabindex",this.selected_item.attr("tabindex")),this.selected_item.attr("tabindex",-1)),this.container.addClass("chzn-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},e.prototype.test_active_click=function(b){return a(b.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()},e.prototype.results_build=function(){var a,b,c,e,f;this.parsing=!0,this.results_data=d.SelectParser.select_to_array(this.form_field),this.is_multiple&&this.choices>0?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),this.form_field.options.length<=this.disable_search_threshold?this.container.addClass("chzn-container-single-nosearch"):this.container.removeClass("chzn-container-single-nosearch")),a="",f=this.results_data;for(c=0,e=f.length;c<e;c++)b=f[c],b.group?a+=this.result_add_group(b):b.empty||(a+=this.result_add_option(b),b.selected&&this.is_multiple?this.choice_build(b):b.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(b.text),this.allow_single_deselect&&this.single_deselect_control_build()));return this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.search_results.html(a),this.parsing=!1},e.prototype.result_add_group=function(b){return b.disabled?"":(b.dom_id=this.container_id+"_g_"+b.array_index,'<li id="'+b.dom_id+'" class="group-result">'+a("<div />").text(b.label).html()+"</li>")},e.prototype.result_do_highlight=function(a){var b,c,d,e,f;if(a.length){this.result_clear_highlight(),this.result_highlight=a,this.result_highlight.addClass("highlighted"),d=parseInt(this.search_results.css("maxHeight"),10),f=this.search_results.scrollTop(),e=d+f,c=this.result_highlight.position().top+this.search_results.scrollTop(),b=c+this.result_highlight.outerHeight();if(b>=e)return this.search_results.scrollTop(b-d>0?b-d:0);if(c<f)return this.search_results.scrollTop(c)}},e.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},e.prototype.results_show=function(){var a;if(!this.is_multiple)this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected);else if(this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1;return a=this.is_multiple?this.container.height():this.container.height()-1,this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this}),this.dropdown.css({top:a+"px",left:0}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results()},e.prototype.results_hide=function(){return this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop"),this.result_clear_highlight(),this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this}),this.dropdown.css({left:"-9000px"}),this.results_showing=!1},e.prototype.set_tab_index=function(a){var b;if(this.form_field_jq.attr("tabindex"))return b=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.is_multiple?this.search_field.attr("tabindex",b):(this.selected_item.attr("tabindex",b),this.search_field.attr("tabindex",-1))},e.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},e.prototype.search_results_mouseup=function(b){var c;c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first();if(c.length)return this.result_highlight=c,this.result_select(b)},e.prototype.search_results_mouseover=function(b){var c;c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first();if(c)return this.result_do_highlight(c)},e.prototype.search_results_mouseout=function(b){if(a(b.target).hasClass("active-result"))return this.result_clear_highlight()},e.prototype.choices_click=function(b){b.preventDefault();if(this.active_field&&!a(b.target).hasClass("search-choice")&&!this.results_showing)return this.results_show()},e.prototype.choice_build=function(b){var c,d,e=this;return this.is_multiple&&this.max_selected_options<=this.choices?(this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1):(c=this.container_id+"_c_"+b.array_index,this.choices+=1,this.search_container.before('<li class="search-choice" id="'+c+'"><span>'+b.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+b.array_index+'"></a></li>'),d=a("#"+c).find("a").first(),d.click(function(a){return e.choice_destroy_link_click(a)}))},e.prototype.choice_destroy_link_click=function(b){return b.preventDefault(),this.is_disabled?b.stopPropagation:(this.pending_destroy_click=!0,this.choice_destroy(a(b.target)))},e.prototype.choice_destroy=function(a){return this.choices-=1,this.show_search_field_default(),this.is_multiple&&this.choices>0&&this.search_field.val().length<1&&this.results_hide(),this.result_deselect(a.attr("rel")),a.parents("li").first().remove()},e.prototype.results_reset=function(){this.form_field.options[0].selected=!0,this.selected_item.find("span").text(this.default_text),this.is_multiple||this.selected_item.addClass("chzn-default"),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change");if(this.active_field)return this.results_hide()},e.prototype.results_reset_cleanup=function(){return this.selected_item.find("abbr").remove()},e.prototype.result_select=function(a){var b,c,d,e;if(this.result_highlight)return b=this.result_highlight,c=b.attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(b):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=b,this.selected_item.removeClass("chzn-default")),b.addClass("result-selected"),e=c.substr(c.lastIndexOf("_")+1),d=this.results_data[e],d.selected=!0,this.form_field.options[d.options_index].selected=!0,this.is_multiple?this.choice_build(d):(this.selected_item.find("span").first().text(d.text),this.allow_single_deselect&&this.single_deselect_control_build()),(!a.metaKey||!this.is_multiple)&&this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field_jq.val()!==this.current_value)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[d.options_index].value}),this.current_value=this.form_field_jq.val(),this.search_field_scale()},e.prototype.result_activate=function(a){return a.addClass("active-result")},e.prototype.result_deactivate=function(a){return a.removeClass("active-result")},e.prototype.result_deselect=function(b){var c,d;return d=this.results_data[b],d.selected=!1,this.form_field.options[d.options_index].selected=!1,c=a("#"+this.container_id+"_o_"+b),c.removeClass("result-selected").addClass("active-result").show(),this.result_clear_highlight(),this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[d.options_index].value}),this.search_field_scale()},e.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect&&this.selected_item.find("abbr").length<1)return this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>')},e.prototype.winnow_results=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;this.no_results_clear(),j=0,k=this.search_field.val()===this.default_text?"":a("<div/>").text(a.trim(this.search_field.val())).html(),g=this.search_contains?"":"^",f=new RegExp(g+k.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),n=new RegExp(k.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),s=this.results_data;for(o=0,q=s.length;o<q;o++){c=s[o];if(!c.disabled&&!c.empty)if(c.group)a("#"+c.dom_id).css("display","none");else if(!this.is_multiple||!c.selected){b=!1,i=c.dom_id,h=a("#"+i);if(f.test(c.html))b=!0,j+=1;else if(c.html.indexOf(" ")>=0||c.html.indexOf("[")===0){e=c.html.replace(/\[|\]/g,"").split(" ");if(e.length)for(p=0,r=e.length;p<r;p++)d=e[p],f.test(d)&&(b=!0,j+=1)}b?(k.length?(l=c.html.search(n),m=c.html.substr(0,l+k.length)+"</em>"+c.html.substr(l+k.length),m=m.substr(0,l)+"<em>"+m.substr(l)):m=c.html,h.html(m),this.result_activate(h),c.group_array_index!=null&&a("#"+this.results_data[c.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&i===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(h))}}return j<1&&k.length?this.no_results(k):this.winnow_results_set_highlight()},e.prototype.winnow_results_clear=function(){var b,c,d,e,f;this.search_field.val(""),c=this.search_results.find("li"),f=[];for(d=0,e=c.length;d<e;d++)b=c[d],b=a(b),b.hasClass("group-result")?f.push(b.css("display","auto")):!this.is_multiple||!b.hasClass("result-selected")?f.push(this.result_activate(b)):f.push(void 0);return f},e.prototype.winnow_results_set_highlight=function(){var a,b;if(!this.result_highlight){b=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),a=b.length?b.first():this.search_results.find(".active-result").first();if(a!=null)return this.result_do_highlight(a)}},e.prototype.no_results=function(b){var c;return c=a('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),c.find("span").first().html(b),this.search_results.append(c)},e.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},e.prototype.keydown_arrow=function(){var b,c;this.result_highlight?this.results_showing&&(c=this.result_highlight.nextAll("li.active-result").first(),c&&this.result_do_highlight(c)):(b=this.search_results.find("li.active-result").first(),b&&this.result_do_highlight(a(b)));if(!this.results_showing)return this.results_show()},e.prototype.keyup_arrow=function(){var a;if(!this.results_showing&&!this.is_multiple)return this.results_show();if(this.result_highlight)return a=this.result_highlight.prevAll("li.active-result"),a.length?this.result_do_highlight(a.first()):(this.choices>0&&this.results_hide(),this.result_clear_highlight())},e.prototype.keydown_backstroke=function(){return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(this.pending_backstroke=this.search_container.siblings("li.search-choice").last(),this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus"))},e.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},e.prototype.keydown_checker=function(a){var b,c;b=(c=a.which)!=null?c:a.keyCode,this.search_field_scale(),b!==8&&this.pending_backstroke&&this.clear_backstroke();switch(b){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(a),this.mouse_on_container=!1;break;case 13:a.preventDefault();break;case 38:a.preventDefault(),this.keyup_arrow();break;case 40:this.keydown_arrow()}},e.prototype.search_field_scale=function(){var b,c,d,e,f,g,h,i,j;if(this.is_multiple){d=0,h=0,f="position:absolute; left: -1000px; top: -1000px; display:none;",g=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"];for(i=0,j=g.length;i<j;i++)e=g[i],f+=e+":"+this.search_field.css(e)+";";return c=a("<div />",{style:f}),c.text(this.search_field.val()),a("body").append(c),h=c.width()+25,c.remove(),h>this.f_width-10&&(h=this.f_width-10),this.search_field.css({width:h+"px"}),b=this.container.height(),this.dropdown.css({top:b+"px"})}},e.prototype.generate_random_id=function(){var b;b="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();while(a("#"+b).length>0)b+=this.generate_random_char();return b},e}(AbstractChosen),c=function(a){var b;return b=a.outerWidth()-a.width()},d.get_side_border_padding=c}.call(this);

/**
 * @version: 1.0 Alpha-1
 * @author: Coolite Inc. http://www.coolite.com/
 * @date: 2008-05-13
 * @copyright: Copyright (c) 2006-2008, Coolite Inc. (http://www.coolite.com/). All rights reserved.
 * @license: Licensed under The MIT License. See license.txt and http://www.datejs.com/license/. 
 * @website: http://www.datejs.com/
 */
Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]};(function(){var b=Date,a=b.prototype,d=b.CultureInfo,g=function(i,h){if(!h){h=2;}return("000"+i).slice(h*-1);};a.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this;};a.setTimeToNow=function(){var h=new Date();this.setHours(h.getHours());this.setMinutes(h.getMinutes());this.setSeconds(h.getSeconds());this.setMilliseconds(h.getMilliseconds());return this;};b.today=function(){return new Date().clearTime();};b.compare=function(i,h){if(isNaN(i)||isNaN(h)){throw new Error(i+" - "+h);}else{if(i instanceof Date&&h instanceof Date){return(i<h)?-1:(i>h)?1:0;}else{throw new TypeError(i+" - "+h);}}};b.equals=function(i,h){return(i.compareTo(h)===0);};b.getDayNumberFromName=function(j){var q=d.dayNames,h=d.abbreviatedDayNames,p=d.shortestDayNames,l=j.toLowerCase();for(var k=0;k<q.length;k++){if(q[k].toLowerCase()==l||h[k].toLowerCase()==l||p[k].toLowerCase()==l){return k;}}return -1;};b.getMonthNumberFromName=function(j){var o=d.monthNames,h=d.abbreviatedMonthNames,l=j.toLowerCase();for(var k=0;k<o.length;k++){if(o[k].toLowerCase()==l||h[k].toLowerCase()==l){return k;}}return -1;};b.isLeapYear=function(h){return((h%4===0&&h%100!==0)||h%400===0);};b.getDaysInMonth=function(h,i){return[31,(b.isLeapYear(h)?29:28),31,30,31,30,31,31,30,31,30,31][i];};b.getTimezoneAbbreviation=function(l){var k=d.timezones,j;for(var h=0;h<k.length;h++){if(k[h].offset===l){return k[h].name;}}return null;};b.getTimezoneOffset=function(h){var l=d.timezones,k;for(var j=0;j<l.length;j++){if(l[j].name===h.toUpperCase()){return l[j].offset;}}return null;};a.clone=function(){return new Date(this.getTime());};a.compareTo=function(h){return Date.compare(this,h);};a.equals=function(h){return Date.equals(this,h||new Date());};a.between=function(i,h){return this.getTime()>=i.getTime()&&this.getTime()<=h.getTime();};a.isAfter=function(h){return this.compareTo(h||new Date())===1;};a.isBefore=function(h){return(this.compareTo(h||new Date())===-1);};a.isToday=function(){return this.isSameDay(new Date());};a.isSameDay=function(h){return this.clone().clearTime().equals(h.clone().clearTime());};a.addMilliseconds=function(h){this.setMilliseconds(this.getMilliseconds()+h);return this;};a.addSeconds=function(h){return this.addMilliseconds(h*1000);};a.addMinutes=function(h){return this.addMilliseconds(h*60000);};a.addHours=function(h){return this.addMilliseconds(h*3600000);};a.addDays=function(h){this.setDate(this.getDate()+h);return this;};a.addWeeks=function(h){return this.addDays(h*7);};a.addMonths=function(h){var i=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+h);this.setDate(Math.min(i,b.getDaysInMonth(this.getFullYear(),this.getMonth())));return this;};a.addYears=function(h){return this.addMonths(h*12);};a.add=function(i){if(typeof i=="number"){this._orient=i;return this;}var h=i;if(h.milliseconds){this.addMilliseconds(h.milliseconds);}if(h.seconds){this.addSeconds(h.seconds);}if(h.minutes){this.addMinutes(h.minutes);}if(h.hours){this.addHours(h.hours);}if(h.weeks){this.addWeeks(h.weeks);}if(h.months){this.addMonths(h.months);}if(h.years){this.addYears(h.years);}if(h.days){this.addDays(h.days);}return this;};var e,f,c;a.getWeek=function(){var p,o,m,l,k,j,i,h,t,q;e=(!e)?this.getFullYear():e;f=(!f)?this.getMonth()+1:f;c=(!c)?this.getDate():c;if(f<=2){p=e-1;o=(p/4|0)-(p/100|0)+(p/400|0);m=((p-1)/4|0)-((p-1)/100|0)+((p-1)/400|0);t=o-m;k=0;j=c-1+(31*(f-1));}else{p=e;o=(p/4|0)-(p/100|0)+(p/400|0);m=((p-1)/4|0)-((p-1)/100|0)+((p-1)/400|0);t=o-m;k=t+1;j=c+((153*(f-3)+2)/5)+58+t;}i=(p+o)%7;l=(j+i-k)%7;h=(j+3-l)|0;if(h<0){q=53-((i-t)/5|0);}else{if(h>364+t){q=1;}else{q=(h/7|0)+1;}}e=f=c=null;return q;};a.getISOWeek=function(){e=this.getUTCFullYear();f=this.getUTCMonth()+1;c=this.getUTCDate();return g(this.getWeek());};a.setWeek=function(h){return this.moveToDayOfWeek(1).addWeeks(h-this.getWeek());};b._validate=function(k,j,h,i){if(typeof k=="undefined"){return false;}else{if(typeof k!="number"){throw new TypeError(k+" is not a Number.");}else{if(k<j||k>h){throw new RangeError(k+" is not a valid value for "+i+".");}}}return true;};b.validateMillisecond=function(h){return b._validate(h,0,999,"millisecond");};b.validateSecond=function(h){return b._validate(h,0,59,"second");};b.validateMinute=function(h){return b._validate(h,0,59,"minute");};b.validateHour=function(h){return b._validate(h,0,23,"hour");};b.validateDay=function(i,h,j){return b._validate(i,1,b.getDaysInMonth(h,j),"day");};b.validateMonth=function(h){return b._validate(h,0,11,"month");};b.validateYear=function(h){return b._validate(h,0,9999,"year");};a.set=function(h){if(b.validateMillisecond(h.millisecond)){this.addMilliseconds(h.millisecond-this.getMilliseconds());}if(b.validateSecond(h.second)){this.addSeconds(h.second-this.getSeconds());}if(b.validateMinute(h.minute)){this.addMinutes(h.minute-this.getMinutes());}if(b.validateHour(h.hour)){this.addHours(h.hour-this.getHours());}if(b.validateMonth(h.month)){this.addMonths(h.month-this.getMonth());}if(b.validateYear(h.year)){this.addYears(h.year-this.getFullYear());}if(b.validateDay(h.day,this.getFullYear(),this.getMonth())){this.addDays(h.day-this.getDate());}if(h.timezone){this.setTimezone(h.timezone);}if(h.timezoneOffset){this.setTimezoneOffset(h.timezoneOffset);}if(h.week&&b._validate(h.week,0,53,"week")){this.setWeek(h.week);}return this;};a.moveToFirstDayOfMonth=function(){return this.set({day:1});};a.moveToLastDayOfMonth=function(){return this.set({day:b.getDaysInMonth(this.getFullYear(),this.getMonth())});};a.moveToNthOccurrence=function(i,j){var h=0;if(j>0){h=j-1;}else{if(j===-1){this.moveToLastDayOfMonth();if(this.getDay()!==i){this.moveToDayOfWeek(i,-1);}return this;}}return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(i,+1).addWeeks(h);};a.moveToDayOfWeek=function(h,i){var j=(h-this.getDay()+7*(i||+1))%7;return this.addDays((j===0)?j+=7*(i||+1):j);};a.moveToMonth=function(j,h){var i=(j-this.getMonth()+12*(h||+1))%12;return this.addMonths((i===0)?i+=12*(h||+1):i);};a.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/86400000)+1;};a.getTimezone=function(){return b.getTimezoneAbbreviation(this.getUTCOffset());};a.setTimezoneOffset=function(j){var h=this.getTimezoneOffset(),i=Number(j)*-6/10;return this.addMinutes(i-h);};a.setTimezone=function(h){return this.setTimezoneOffset(b.getTimezoneOffset(h));};a.hasDaylightSavingTime=function(){return(Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset());};a.isDaylightSavingTime=function(){return(this.hasDaylightSavingTime()&&new Date().getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset());};a.getUTCOffset=function(){var i=this.getTimezoneOffset()*-10/6,h;if(i<0){h=(i-10000).toString();return h.charAt(0)+h.substr(2);}else{h=(i+10000).toString();return"+"+h.substr(1);}};a.getElapsed=function(h){return(h||new Date())-this;};if(!a.toISOString){a.toISOString=function(){function h(i){return i<10?"0"+i:i;}return'"'+this.getUTCFullYear()+"-"+h(this.getUTCMonth()+1)+"-"+h(this.getUTCDate())+"T"+h(this.getUTCHours())+":"+h(this.getUTCMinutes())+":"+h(this.getUTCSeconds())+'Z"';};}a._toString=a.toString;a.toString=function(j){var h=this;if(j&&j.length==1){var k=d.formatPatterns;h.t=h.toString;switch(j){case"d":return h.t(k.shortDate);case"D":return h.t(k.longDate);case"F":return h.t(k.fullDateTime);case"m":return h.t(k.monthDay);case"r":return h.t(k.rfc1123);case"s":return h.t(k.sortableDateTime);case"t":return h.t(k.shortTime);case"T":return h.t(k.longTime);case"u":return h.t(k.universalSortableDateTime);case"y":return h.t(k.yearMonth);}}var i=function(l){switch(l*1){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th";}};return j?j.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(l){if(l.charAt(0)==="\\"){return l.replace("\\","");}h.h=h.getHours;switch(l){case"hh":return g(h.h()<13?(h.h()===0?12:h.h()):(h.h()-12));case"h":return h.h()<13?(h.h()===0?12:h.h()):(h.h()-12);case"HH":return g(h.h());case"H":return h.h();case"mm":return g(h.getMinutes());case"m":return h.getMinutes();case"ss":return g(h.getSeconds());case"s":return h.getSeconds();case"yyyy":return g(h.getFullYear(),4);case"yy":return g(h.getFullYear());case"dddd":return d.dayNames[h.getDay()];case"ddd":return d.abbreviatedDayNames[h.getDay()];case"dd":return g(h.getDate());case"d":return h.getDate();case"MMMM":return d.monthNames[h.getMonth()];case"MMM":return d.abbreviatedMonthNames[h.getMonth()];case"MM":return g((h.getMonth()+1));case"M":return h.getMonth()+1;case"t":return h.h()<12?d.amDesignator.substring(0,1):d.pmDesignator.substring(0,1);case"tt":return h.h()<12?d.amDesignator:d.pmDesignator;case"S":return i(h.getDate());default:return l;}}):this._toString();};}());(function(){var v=Date,g=v.prototype,w=v.CultureInfo,o=Number.prototype;g._orient=+1;g._nth=null;g._is=false;g._same=false;g._isSecond=false;o._dateElement="day";g.next=function(){this._orient=+1;return this;};v.next=function(){return v.today().next();};g.last=g.prev=g.previous=function(){this._orient=-1;return this;};v.last=v.prev=v.previous=function(){return v.today().last();};g.is=function(){this._is=true;return this;};g.same=function(){this._same=true;this._isSecond=false;return this;};g.today=function(){return this.same().day();};g.weekday=function(){if(this._is){this._is=false;return(!this.is().sat()&&!this.is().sun());}return false;};g.at=function(i){return(typeof i==="string")?v.parse(this.toString("d")+" "+i):this.set(i);};o.fromNow=o.after=function(i){var j={};j[this._dateElement]=this;return((!i)?new Date():i.clone()).add(j);};o.ago=o.before=function(i){var j={};j[this._dateElement]=this*-1;return((!i)?new Date():i.clone()).add(j);};var e=("sunday monday tuesday wednesday thursday friday saturday").split(/\s/),h=("january february march april may june july august september october november december").split(/\s/),n=("Millisecond Second Minute Hour Day Week Month Year").split(/\s/),p=("Milliseconds Seconds Minutes Hours Date Week Month FullYear").split(/\s/),b=("final first second third fourth fifth").split(/\s/),y;g.toObject=function(){var k={};for(var j=0;j<n.length;j++){k[n[j].toLowerCase()]=this["get"+p[j]]();}return k;};v.fromObject=function(i){i.week=null;return Date.today().set(i);};var x=function(i){return function(){if(this._is){this._is=false;return this.getDay()==i;}if(this._nth!==null){if(this._isSecond){this.addSeconds(this._orient*-1);}this._isSecond=false;var k=this._nth;this._nth=null;var j=this.clone().moveToLastDayOfMonth();this.moveToNthOccurrence(i,k);if(this>j){throw new RangeError(v.getDayName(i)+" does not occur "+k+" times in the month of "+v.getMonthName(j.getMonth())+" "+j.getFullYear()+".");}return this;}return this.moveToDayOfWeek(i,this._orient);};};var f=function(i){return function(){var k=v.today(),j=i-k.getDay();if(i===0&&w.firstDayOfWeek===1&&k.getDay()!==0){j=j+7;}return k.addDays(j);};};for(var u=0;u<e.length;u++){v[e[u].toUpperCase()]=v[e[u].toUpperCase().substring(0,3)]=u;v[e[u]]=v[e[u].substring(0,3)]=f(u);g[e[u]]=g[e[u].substring(0,3)]=x(u);}var z=function(i){return function(){if(this._is){this._is=false;return this.getMonth()===i;}return this.moveToMonth(i,this._orient);};};var m=function(i){return function(){return v.today().set({month:i,day:1});};};for(var t=0;t<h.length;t++){v[h[t].toUpperCase()]=v[h[t].toUpperCase().substring(0,3)]=t;v[h[t]]=v[h[t].substring(0,3)]=m(t);g[h[t]]=g[h[t].substring(0,3)]=z(t);}var c=function(i){return function(){if(this._isSecond){this._isSecond=false;return this;}if(this._same){this._same=this._is=false;var C=this.toObject(),B=(arguments[0]||new Date()).toObject(),A="",l=i.toLowerCase();for(var j=(n.length-1);j>-1;j--){A=n[j].toLowerCase();if(C[A]!=B[A]){return false;}if(l==A){break;}}return true;}if(i.substring(i.length-1)!="s"){i+="s";}return this["add"+i](this._orient);};};var d=function(i){return function(){this._dateElement=i;return this;};};for(var s=0;s<n.length;s++){y=n[s].toLowerCase();g[y]=g[y+"s"]=c(n[s]);o[y]=o[y+"s"]=d(y);}g._ss=c("Second");var a=function(i){return function(j){if(this._same){return this._ss(arguments[0]);}if(j||j===0){return this.moveToNthOccurrence(j,i);}this._nth=i;if(i===2&&(j===undefined||j===null)){this._isSecond=true;return this.addSeconds(this._orient);}return this;};};for(var q=0;q<b.length;q++){g[b[q]]=(q===0)?a(-1):a(q);}}());(function(){Date.Parsing={Exception:function(i){this.message="Parse error at '"+i.substring(0,10)+" ...'";}};var a=Date.Parsing;var c=a.Operators={rtoken:function(i){return function(j){var k=j.match(i);if(k){return([k[0],j.substring(k[0].length)]);}else{throw new a.Exception(j);}};},token:function(i){return function(j){return c.rtoken(new RegExp("^s*"+j+"s*"))(j);};},stoken:function(i){return c.rtoken(new RegExp("^"+i));},until:function(i){return function(j){var k=[],m=null;while(j.length){try{m=i.call(this,j);}catch(l){k.push(m[0]);j=m[1];continue;}break;}return[k,j];};},many:function(i){return function(j){var m=[],k=null;while(j.length){try{k=i.call(this,j);}catch(l){return[m,j];}m.push(k[0]);j=k[1];}return[m,j];};},optional:function(i){return function(j){var k=null;try{k=i.call(this,j);}catch(l){return[null,j];}return[k[0],k[1]];};},not:function(i){return function(j){try{i.call(this,j);}catch(k){return[null,j];}throw new a.Exception(j);};},ignore:function(i){return i?function(j){var k=null;k=i.call(this,j);return[null,k[1]];}:null;},product:function(){var k=arguments[0],l=Array.prototype.slice.call(arguments,1),m=[];for(var j=0;j<k.length;j++){m.push(c.each(k[j],l));}return m;},cache:function(k){var i={},j=null;return function(l){try{j=i[l]=(i[l]||k.call(this,l));}catch(m){j=i[l]=m;}if(j instanceof a.Exception){throw j;}else{return j;}};},any:function(){var i=arguments;return function(k){var l=null;for(var j=0;j<i.length;j++){if(i[j]==null){continue;}try{l=(i[j].call(this,k));}catch(m){l=null;}if(l){return l;}}throw new a.Exception(k);};},each:function(){var i=arguments;return function(k){var n=[],l=null;for(var j=0;j<i.length;j++){if(i[j]==null){continue;}try{l=(i[j].call(this,k));}catch(m){throw new a.Exception(k);}n.push(l[0]);k=l[1];}return[n,k];};},all:function(){var j=arguments,i=i;return i.each(i.optional(j));},sequence:function(i,j,k){j=j||c.rtoken(/^\s*/);k=k||null;if(i.length==1){return i[0];}return function(o){var p=null,t=null;var v=[];for(var n=0;n<i.length;n++){try{p=i[n].call(this,o);}catch(u){break;}v.push(p[0]);try{t=j.call(this,p[1]);}catch(m){t=null;break;}o=t[1];}if(!p){throw new a.Exception(o);}if(t){throw new a.Exception(t[1]);}if(k){try{p=k.call(this,p[1]);}catch(l){throw new a.Exception(p[1]);}}return[v,(p?p[1]:o)];};},between:function(j,k,i){i=i||j;var l=c.each(c.ignore(j),k,c.ignore(i));return function(m){var n=l.call(this,m);return[[n[0][0],r[0][2]],n[1]];};},list:function(i,j,k){j=j||c.rtoken(/^\s*/);k=k||null;return(i instanceof Array?c.each(c.product(i.slice(0,-1),c.ignore(j)),i.slice(-1),c.ignore(k)):c.each(c.many(c.each(i,c.ignore(j))),px,c.ignore(k)));},set:function(i,j,k){j=j||c.rtoken(/^\s*/);k=k||null;return function(B){var l=null,n=null,m=null,o=null,t=[[],B],A=false;for(var v=0;v<i.length;v++){m=null;n=null;l=null;A=(i.length==1);try{l=i[v].call(this,B);}catch(y){continue;}o=[[l[0]],l[1]];if(l[1].length>0&&!A){try{m=j.call(this,l[1]);}catch(z){A=true;}}else{A=true;}if(!A&&m[1].length===0){A=true;}if(!A){var w=[];for(var u=0;u<i.length;u++){if(v!=u){w.push(i[u]);}}n=c.set(w,j).call(this,m[1]);if(n[0].length>0){o[0]=o[0].concat(n[0]);o[1]=n[1];}}if(o[1].length<t[1].length){t=o;}if(t[1].length===0){break;}}if(t[0].length===0){return t;}if(k){try{m=k.call(this,t[1]);}catch(x){throw new a.Exception(t[1]);}t[1]=m[1];}return t;};},forward:function(i,j){return function(k){return i[j].call(this,k);};},replace:function(j,i){return function(k){var l=j.call(this,k);return[i,l[1]];};},process:function(j,i){return function(k){var l=j.call(this,k);return[i.call(this,l[0]),l[1]];};},min:function(i,j){return function(k){var l=j.call(this,k);if(l[0].length<i){throw new a.Exception(k);}return l;};}};var h=function(i){return function(){var j=null,m=[];if(arguments.length>1){j=Array.prototype.slice.call(arguments);}else{if(arguments[0] instanceof Array){j=arguments[0];}}if(j){for(var l=0,k=j.shift();l<k.length;l++){j.unshift(k[l]);m.push(i.apply(null,j));j.shift();return m;}}else{return i.apply(null,arguments);}};};var g="optional not ignore cache".split(/\s/);for(var d=0;d<g.length;d++){c[g[d]]=h(c[g[d]]);}var f=function(i){return function(){if(arguments[0] instanceof Array){return i.apply(null,arguments[0]);}else{return i.apply(null,arguments);}};};var e="each any all".split(/\s/);for(var b=0;b<e.length;b++){c[e[b]]=f(c[e[b]]);}}());(function(){var e=Date,l=e.prototype,f=e.CultureInfo;var h=function(m){var n=[];for(var g=0;g<m.length;g++){if(m[g] instanceof Array){n=n.concat(h(m[g]));}else{if(m[g]){n.push(m[g]);}}}return n;};e.Grammar={};e.Translator={hour:function(g){return function(){this.hour=Number(g);};},minute:function(g){return function(){this.minute=Number(g);};},second:function(g){return function(){this.second=Number(g);};},meridian:function(g){return function(){this.meridian=g.slice(0,1).toLowerCase();};},timezone:function(g){return function(){var m=g.replace(/[^\d\+\-]/g,"");if(m.length){this.timezoneOffset=Number(m);}else{this.timezone=g.toLowerCase();}};},day:function(g){var m=g[0];return function(){this.day=Number(m.match(/\d+/)[0]);};},month:function(g){return function(){this.month=(g.length==3)?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(g)/4:Number(g)-1;};},year:function(g){return function(){var m=Number(g);this.year=((g.length>2)?m:(m+(((m+2000)<f.twoDigitYearMax)?2000:1900)));};},rday:function(g){return function(){switch(g){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0;this.now=true;break;}};},finishExact:function(g){g=(g instanceof Array)?g:[g];for(var n=0;n<g.length;n++){if(g[n]){g[n].call(this);}}var m=new Date();if((this.hour||this.minute)&&(!this.month&&!this.year&&!this.day)){this.day=m.getDate();}if(!this.year){this.year=m.getFullYear();}if(!this.month&&this.month!==0){this.month=m.getMonth();}if(!this.day){this.day=1;}if(!this.hour){this.hour=0;}if(!this.minute){this.minute=0;}if(!this.second){this.second=0;}if(this.meridian&&this.hour){if(this.meridian=="p"&&this.hour<12){this.hour=this.hour+12;}else{if(this.meridian=="a"&&this.hour==12){this.hour=0;}}}if(this.day>e.getDaysInMonth(this.year,this.month)){throw new RangeError(this.day+" is not a valid value for days.");}var o=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);if(this.timezone){o.set({timezone:this.timezone});}else{if(this.timezoneOffset){o.set({timezoneOffset:this.timezoneOffset});}}return o;},finish:function(g){g=(g instanceof Array)?h(g):[g];if(g.length===0){return null;}for(var q=0;q<g.length;q++){if(typeof g[q]=="function"){g[q].call(this);}}var n=e.today();if(this.now&&!this.unit&&!this.operator){return new Date();}else{if(this.now){n=new Date();}}var s=!!(this.days&&this.days!==null||this.orient||this.operator);var t,p,o;o=((this.orient=="past"||this.operator=="subtract")?-1:1);if(!this.now&&"hour minute second".indexOf(this.unit)!=-1){n.setTimeToNow();}if(this.month||this.month===0){if("year day hour minute second".indexOf(this.unit)!=-1){this.value=this.month+1;this.month=null;s=true;}}if(!s&&this.weekday&&!this.day&&!this.days){var m=Date[this.weekday]();this.day=m.getDate();if(!this.month){this.month=m.getMonth();}this.year=m.getFullYear();}if(s&&this.weekday&&this.unit!="month"){this.unit="day";t=(e.getDayNumberFromName(this.weekday)-n.getDay());p=7;this.days=t?((t+(o*p))%p):(o*p);}if(this.month&&this.unit=="day"&&this.operator){this.value=(this.month+1);this.month=null;}if(this.value!=null&&this.month!=null&&this.year!=null){this.day=this.value*1;}if(this.month&&!this.day&&this.value){n.set({day:this.value*1});if(!s){this.day=this.value*1;}}if(!this.month&&this.value&&this.unit=="month"&&!this.now){this.month=this.value;s=true;}if(s&&(this.month||this.month===0)&&this.unit!="year"){this.unit="month";t=(this.month-n.getMonth());p=12;this.months=t?((t+(o*p))%p):(o*p);this.month=null;}if(!this.unit){this.unit="day";}if(!this.value&&this.operator&&this.operator!==null&&this[this.unit+"s"]&&this[this.unit+"s"]!==null){this[this.unit+"s"]=this[this.unit+"s"]+((this.operator=="add")?1:-1)+(this.value||0)*o;}else{if(this[this.unit+"s"]==null||this.operator!=null){if(!this.value){this.value=1;}this[this.unit+"s"]=this.value*o;}}if(this.meridian&&this.hour){if(this.meridian=="p"&&this.hour<12){this.hour=this.hour+12;}else{if(this.meridian=="a"&&this.hour==12){this.hour=0;}}}if(this.weekday&&!this.day&&!this.days){var m=Date[this.weekday]();this.day=m.getDate();if(m.getMonth()!==n.getMonth()){this.month=m.getMonth();}}if((this.month||this.month===0)&&!this.day){this.day=1;}if(!this.orient&&!this.operator&&this.unit=="week"&&this.value&&!this.day&&!this.month){return Date.today().setWeek(this.value);}if(s&&this.timezone&&this.day&&this.days){this.day=this.days;}return(s)?n.add(this):n.set(this);}};var i=e.Parsing.Operators,d=e.Grammar,k=e.Translator,b;d.datePartDelimiter=i.rtoken(/^([\s\-\.\,\/\x27]+)/);d.timePartDelimiter=i.stoken(":");d.whiteSpace=i.rtoken(/^\s*/);d.generalDelimiter=i.rtoken(/^(([\s\,]|at|@|on)+)/);var a={};d.ctoken=function(p){var o=a[p];if(!o){var q=f.regexPatterns;var n=p.split(/\s+/),m=[];for(var g=0;g<n.length;g++){m.push(i.replace(i.rtoken(q[n[g]]),n[g]));}o=a[p]=i.any.apply(null,m);}return o;};d.ctoken2=function(g){return i.rtoken(f.regexPatterns[g]);};d.h=i.cache(i.process(i.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),k.hour));d.hh=i.cache(i.process(i.rtoken(/^(0[0-9]|1[0-2])/),k.hour));d.H=i.cache(i.process(i.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),k.hour));d.HH=i.cache(i.process(i.rtoken(/^([0-1][0-9]|2[0-3])/),k.hour));d.m=i.cache(i.process(i.rtoken(/^([0-5][0-9]|[0-9])/),k.minute));d.mm=i.cache(i.process(i.rtoken(/^[0-5][0-9]/),k.minute));d.s=i.cache(i.process(i.rtoken(/^([0-5][0-9]|[0-9])/),k.second));d.ss=i.cache(i.process(i.rtoken(/^[0-5][0-9]/),k.second));d.hms=i.cache(i.sequence([d.H,d.m,d.s],d.timePartDelimiter));d.t=i.cache(i.process(d.ctoken2("shortMeridian"),k.meridian));d.tt=i.cache(i.process(d.ctoken2("longMeridian"),k.meridian));d.z=i.cache(i.process(i.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),k.timezone));d.zz=i.cache(i.process(i.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),k.timezone));d.zzz=i.cache(i.process(d.ctoken2("timezone"),k.timezone));d.timeSuffix=i.each(i.ignore(d.whiteSpace),i.set([d.tt,d.zzz]));d.time=i.each(i.optional(i.ignore(i.stoken("T"))),d.hms,d.timeSuffix);d.d=i.cache(i.process(i.each(i.rtoken(/^([0-2]\d|3[0-1]|\d)/),i.optional(d.ctoken2("ordinalSuffix"))),k.day));d.dd=i.cache(i.process(i.each(i.rtoken(/^([0-2]\d|3[0-1])/),i.optional(d.ctoken2("ordinalSuffix"))),k.day));d.ddd=d.dddd=i.cache(i.process(d.ctoken("sun mon tue wed thu fri sat"),function(g){return function(){this.weekday=g;};}));d.M=i.cache(i.process(i.rtoken(/^(1[0-2]|0\d|\d)/),k.month));d.MM=i.cache(i.process(i.rtoken(/^(1[0-2]|0\d)/),k.month));d.MMM=d.MMMM=i.cache(i.process(d.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),k.month));d.y=i.cache(i.process(i.rtoken(/^(\d\d?)/),k.year));d.yy=i.cache(i.process(i.rtoken(/^(\d\d)/),k.year));d.yyy=i.cache(i.process(i.rtoken(/^(\d\d?\d?\d?)/),k.year));d.yyyy=i.cache(i.process(i.rtoken(/^(\d\d\d\d)/),k.year));b=function(){return i.each(i.any.apply(null,arguments),i.not(d.ctoken2("timeContext")));};d.day=b(d.d,d.dd);d.month=b(d.M,d.MMM);d.year=b(d.yyyy,d.yy);d.orientation=i.process(d.ctoken("past future"),function(g){return function(){this.orient=g;};});d.operator=i.process(d.ctoken("add subtract"),function(g){return function(){this.operator=g;};});d.rday=i.process(d.ctoken("yesterday tomorrow today now"),k.rday);d.unit=i.process(d.ctoken("second minute hour day week month year"),function(g){return function(){this.unit=g;};});d.value=i.process(i.rtoken(/^\d\d?(st|nd|rd|th)?/),function(g){return function(){this.value=g.replace(/\D/g,"");};});d.expression=i.set([d.rday,d.operator,d.value,d.unit,d.orientation,d.ddd,d.MMM]);b=function(){return i.set(arguments,d.datePartDelimiter);};d.mdy=b(d.ddd,d.month,d.day,d.year);d.ymd=b(d.ddd,d.year,d.month,d.day);d.dmy=b(d.ddd,d.day,d.month,d.year);d.date=function(g){return((d[f.dateElementOrder]||d.mdy).call(this,g));};d.format=i.process(i.many(i.any(i.process(i.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(g){if(d[g]){return d[g];}else{throw e.Parsing.Exception(g);}}),i.process(i.rtoken(/^[^dMyhHmstz]+/),function(g){return i.ignore(i.stoken(g));}))),function(g){return i.process(i.each.apply(null,g),k.finishExact);});var j={};var c=function(g){return j[g]=(j[g]||d.format(g)[0]);};d.formats=function(m){if(m instanceof Array){var n=[];for(var g=0;g<m.length;g++){n.push(c(m[g]));}return i.any.apply(null,n);}else{return c(m);}};d._formats=d.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]);d._start=i.process(i.set([d.date,d.time,d.expression],d.generalDelimiter,d.whiteSpace),k.finish);d.start=function(g){try{var m=d._formats.call({},g);if(m[1].length===0){return m;}}catch(n){}return d._start.call({},g);};e._parse=e.parse;e.parse=function(g){var m=null;if(!g){return null;}if(g instanceof Date){return g;}try{m=e.Grammar.start.call({},g.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"));}catch(n){return null;}return((m[1].length===0)?m[0]:null);};e.getParseFunction=function(m){var g=e.Grammar.formats(m);return function(n){var o=null;try{o=g.call({},n);}catch(p){return null;}return((o[1].length===0)?o[0]:null);};};e.parseExact=function(g,m){return e.getParseFunction(m)(g);};}());